<nav class="navbar navbar-expand-lg navbar-modern">
  <div class="container-fluid px-4">
    <!-- Brand Logo - Left Side -->
    <a class="navbar-brand d-flex align-items-center" routerLink="/" aria-label="Starlight Home">
      <div class="brand-logo-container">
        <img src="assets/img/starlight-logo.svg" alt="Starlight Logo" class="brand-logo" width="32" height="32">
        <span class="brand-text">Starlight</span>
      </div>
    </a>

    <!-- Mobile Toggle Button -->
    <button 
      class="navbar-toggler border-0" 
      type="button" 
      data-bs-toggle="collapse" 
      data-bs-target="#navbarNav" 
      aria-controls="navbarNav" 
      aria-expanded="false" 
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navigation Content -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <!-- Center Navigation - Only for logged in users -->
      <ul class="navbar-nav mx-auto" *ngIf="isLoggedIn()">
        <li class="nav-item">
          <a 
            class="nav-link d-flex align-items-center" 
            routerLink="/homepage-posts" 
            routerLinkActive="active" 
            [routerLinkActiveOptions]="{exact: true}"
          >
            <i class="bi bi-house-door me-2"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" routerLink="/communities" routerLinkActive="active">
            <i class="bi bi-people me-2"></i>
            <span>Communities</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" routerLink="/new-post" routerLinkActive="active">
            <i class="bi bi-pencil-square me-2"></i>
            <span>Write</span>
          </a>
        </li>
      </ul>

      <!-- Right Side Actions -->
      <div class="navbar-actions d-flex align-items-center">
        <!-- Logged In User Menu -->
        <div *ngIf="isLoggedIn(); else loggedOut" class="user-menu">
          <div class="dropdown">
            <button 
              class="btn btn-user dropdown-toggle d-flex align-items-center" 
              type="button" 
              id="userDropdown" 
              data-bs-toggle="dropdown" 
              aria-expanded="false"
              aria-label="User menu"
            >
              <div class="user-avatar">
                <i class="bi bi-person-circle"></i>
              </div>
              <span class="user-name d-none d-lg-inline">My Account</span>
              <i class="bi bi-chevron-down ms-1 d-none d-lg-inline"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end user-dropdown" aria-labelledby="userDropdown">
              <li class="dropdown-header">
                <div class="d-flex align-items-center">
                  <div class="user-avatar me-2">
                    <i class="bi bi-person-circle"></i>
                  </div>
                  <div>
                    <div class="fw-semibold">Welcome back!</div>
                    <small class="text-muted">Manage your account</small>
                  </div>
                </div>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" routerLink="/update-profile">
                  <i class="bi bi-person-gear me-2"></i>Profile Settings
                </a>
              </li>
              <li>
                <a class="dropdown-item" routerLink="/homepage-posts">
                  <i class="bi bi-journal-text me-2"></i>My Posts
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item text-danger" (click)="logout()" role="button">
                  <i class="bi bi-box-arrow-right me-2"></i>Sign Out
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Not Logged In - Login/Register -->
        <ng-template #loggedOut>
          <div class="auth-buttons d-flex align-items-center gap-2">
            <a class="btn btn-outline-primary btn-sm" routerLink="/login">
              <i class="bi bi-box-arrow-in-right me-1"></i>
              <span class="d-none d-sm-inline">Sign In</span>
            </a>
            <a class="btn btn-primary btn-sm" routerLink="/registration">
              <i class="bi bi-person-plus me-1"></i>
              <span class="d-none d-sm-inline">Get Started</span>
            </a>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</nav>
